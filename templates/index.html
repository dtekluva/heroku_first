<!DOCTYPE html>
<html>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename ='style.css') }}">
<body class="w3-black">

<!-- Icon Bar (Sidebar - hidden on small screens) -->
<nav class="w3-sidebar w3-bar-block w3-small w3-hide-small w3-center">
  <!-- Avatar image in top left corner -->
  <!-- <img src="/w3images/avatar_smoke.jpg" style="width:100%"> -->
  <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 122.88 117.72" style="
    fill: white;
"><title>big-data</title><path d="M75.19,52.64l-.54.28-.57.32c-.59.35-1.17.73-1.74,1.13s-1.15.86-1.75,1.35a.53.53,0,0,1-.74-.08l-2.54-2.91a.52.52,0,0,1,0-.73c.45-.41.92-.82,1.4-1.19s1-.74,1.52-1.09.84-.52,1.27-.76.88-.47,1.31-.67l.53-.25a15,15,0,0,0-6.32-5.72A16,16,0,0,0,62.92,41a16.57,16.57,0,0,0-4.39-.17,15.89,15.89,0,0,0-4.25,1,14.68,14.68,0,0,0-3.72,2.09A14.25,14.25,0,0,0,47,48a16.32,16.32,0,0,0-1.94,5.24l-.25,1.33a.53.53,0,0,1-.43.42l-1.32.23c-.63.11-1.23.24-1.79.39s-1.09.33-1.57.52a10.14,10.14,0,0,0-1.33.61,9.91,9.91,0,0,0-1.17.72,8.78,8.78,0,0,0-.8.66,8,8,0,0,0-2.11,3.25,9,9,0,0,0-.48,3,9.93,9.93,0,0,0,.51,3,10.26,10.26,0,0,0,1.39,2.74,10.87,10.87,0,0,0,.74.91,10.35,10.35,0,0,0,.84.79,7.23,7.23,0,0,0,1,.68l0,0a7.33,7.33,0,0,0,1,.52,8.59,8.59,0,0,0,1.21.41,10.12,10.12,0,0,0,1.31.26H80.08a21.38,21.38,0,0,0,2.49-.76,14.83,14.83,0,0,0,2.2-1,11,11,0,0,0,1.81-1.23,8.48,8.48,0,0,0,2.77-4.31,13.18,13.18,0,0,0,.52-3.64,14.87,14.87,0,0,0-.45-3.85,11.07,11.07,0,0,0-1.35-3.17c-.18-.27-.37-.53-.55-.77s-.39-.48-.59-.69A8.84,8.84,0,0,0,84,52.18a9.19,9.19,0,0,0-3.55-.72,11.65,11.65,0,0,0-2.61.28,14.43,14.43,0,0,0-2.67.89Zm-30.38-10-8-8a12.73,12.73,0,0,1-15.48-2h0a12.69,12.69,0,0,1-.16-17.81l.16-.18h0a12.72,12.72,0,0,1,18,0h0a12.72,12.72,0,0,1,2,15.46l8.44,8.44a20.29,20.29,0,0,1,2.74-1.32,20.86,20.86,0,0,1,5.61-1.33A21.15,21.15,0,0,1,63,36v-11a12.66,12.66,0,0,1-5.83-3.33h0A12.73,12.73,0,0,1,75,3.56l.18.17a12.71,12.71,0,0,1,0,18h0a12.68,12.68,0,0,1-5.82,3.33V37.94a20,20,0,0,1,9,8.73l10-9.89a12.73,12.73,0,0,1,2-15.46h0A12.69,12.69,0,0,1,108,21.16l.18.16h0a12.72,12.72,0,0,1,0,18h0a12.73,12.73,0,0,1-15.45,2l-6.45,6.5a13.56,13.56,0,0,1,4.25,3.1c.29.32.58.66.86,1s.53.72.79,1.11a15.92,15.92,0,0,1,2,4.51,19.55,19.55,0,0,1,.65,5.24V63h3a12.66,12.66,0,0,1,3.33-5.83h0A12.73,12.73,0,0,1,119.32,75l-.17.18a12.74,12.74,0,0,1-18,0v0a12.6,12.6,0,0,1-3.33-5.81h-4.3a12.75,12.75,0,0,1-1.6,2.84,13.69,13.69,0,0,1-2.12,2.25,15.72,15.72,0,0,1-2.61,1.81,21,21,0,0,1-3,1.35,30.65,30.65,0,0,1-3.35,1A37.83,37.83,0,0,1,76.8,79l9.28,9.28a12.73,12.73,0,0,1,15.48,2h0a12.69,12.69,0,0,1,.16,17.81l-.16.18h0a12.72,12.72,0,0,1-18,0h0a12.72,12.72,0,0,1-2-15.46L68,79.14c-2.6,0-5.35,0-8.09-.11V92.66A12.84,12.84,0,0,1,65.74,96h0a12.73,12.73,0,0,1-17.83,18.16l-.18-.16a12.72,12.72,0,0,1,0-18h0a12.86,12.86,0,0,1,5.82-3.33V78.87c-4.54-.12-8.65-.24-11.47-.24l-7.46,7.45a12.73,12.73,0,0,1-2,15.48h0a12.69,12.69,0,0,1-17.81.16l-.18-.16h0a12.72,12.72,0,0,1,0-18h0a12.72,12.72,0,0,1,15.46-2l5.18-5.17a11.1,11.1,0,0,1-1.15-.86l0,0a14.26,14.26,0,0,1-1.26-1.19A13.38,13.38,0,0,1,31.76,73a14.91,14.91,0,0,1-2.83-8.66,14.15,14.15,0,0,1,.67-4.42H25.06a12.66,12.66,0,0,1-3.33,5.83h0A12.73,12.73,0,0,1,3.56,47.91l.17-.18a12.71,12.71,0,0,1,18,0h0a12.68,12.68,0,0,1,3.33,5.82h9.08l.2-.14a14.5,14.5,0,0,1,1.71-1.06A15.89,15.89,0,0,1,38,51.48c.47-.18.95-.35,1.45-.5s.8-.23,1.21-.33a20.55,20.55,0,0,1,2.54-5.81,18,18,0,0,1,1.65-2.2Zm21.33-23A6.89,6.89,0,0,0,71,7.86l-.12-.13a6.9,6.9,0,0,0-9.62,9.88h0a6.86,6.86,0,0,0,4.87,2Zm-30.82,8.8a6.91,6.91,0,0,0-.12-9.62h0a6.89,6.89,0,0,0-9.74,0h0l-.12.12a6.92,6.92,0,0,0,.12,9.63h0a6.9,6.9,0,0,0,9.75,0h0l.13-.12ZM19.62,56.74A6.89,6.89,0,0,0,7.86,51.86L7.73,52a6.9,6.9,0,0,0,9.88,9.62h0a6.82,6.82,0,0,0,2-4.86Zm8.8,30.82a6.92,6.92,0,0,0-9.63.12h0a6.89,6.89,0,0,0,0,9.74h0l.12.12a6.91,6.91,0,0,0,9.62-.12h0a6.9,6.9,0,0,0,0-9.75h0l-.12-.13ZM56.73,98.11a6.89,6.89,0,0,0-4.87,11.75L52,110a6.89,6.89,0,0,0,9.62-9.87h0a6.86,6.86,0,0,0-4.87-2Zm30.83-3.65a6.92,6.92,0,0,0,.12,9.63h0a6.89,6.89,0,0,0,9.74,0h0l.12-.12a6.91,6.91,0,0,0-.12-9.62h0a6.9,6.9,0,0,0-9.75,0h0l-.13.12Zm15.7-28.32A6.89,6.89,0,0,0,115,71l.13-.12a6.9,6.9,0,0,0-9.88-9.62h0a6.86,6.86,0,0,0-2,4.87Zm-8.8-30.82a6.91,6.91,0,0,0,9.62-.12h0a6.89,6.89,0,0,0,0-9.74h0l-.12-.12a6.92,6.92,0,0,0-9.63.12h0a6.9,6.9,0,0,0,0,9.75h0l.12.13Z"></path></svg>
  <a href="#" class="w3-bar-item w3-button w3-padding-large w3-black">
    <i class="fa fa-home w3-xxlarge"></i>
    <p>HOME</p>
  </a>
</nav>

<!-- Navbar on small screens (Hidden on medium and large screens) -->
<div class="w3-top w3-hide-large w3-hide-medium" id="myNavbar">
  <div class="w3-bar w3-black w3-opacity w3-hover-opacity-off w3-center w3-small">
    <a href="#" class="w3-bar-item w3-button" style="width:25% !important">HOME</a>
    <a href="#about" class="w3-bar-item w3-button" style="width:25% !important">ABOUT</a>
    <a href="#photos" class="w3-bar-item w3-button" style="width:25% !important">PHOTOS</a>
    <a href="#contact" class="w3-bar-item w3-button" style="width:25% !important">CONTACT</a>
  </div>
</div>

<!-- Page Content -->
<div class="w3-padding-large" id="main">
  <!-- Header/Home -->
  <header class="w3-container w3-padding-32 w3-center w3-black" id="home">
    <h1 class="w3-jumbo"><span class="w3-hide-small">IOT</span> SMART HOME.</h1>
    <p>CONTROL CENTER</p>
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 122.88 70.9" style="enable-background:new 0 0 122.88 70.9;fill: white;height: fit-content;" xml:space="preserve"><style type="text/css">
        .st0{fill-rule:evenodd;clip-rule:evenodd;}
    </style><g><path class="st0" d="M2.54,65.83h12.59c-0.93-0.24-1.63-1.1-1.63-2.1V8.21c0-1.19,0.98-2.17,2.17-2.17h14.29l-1.4,3.4H17.21l0,0 v53.67h88.19V9.43H94.31l-1.39-3.4h13.72c1.19,0,2.17,0.98,2.17,2.17v55.51c0,1.01-0.69,1.86-1.63,2.1h13.16 c1.4,0,2.54,1.14,2.54,2.54l0,0c0,1.4-1.14,2.54-2.54,2.54H2.54C1.14,70.9,0,69.76,0,68.36l0,0C0,66.97,1.14,65.83,2.54,65.83 L2.54,65.83L2.54,65.83z M66.31,47.55c-0.91,0.88-1.88,1.77-2.91,2.65l0.16-0.02c0.29-0.04,0.57-0.1,0.86-0.15 c0.78-0.15,1.54-0.35,2.29-0.58c0.37-0.12,0.74-0.24,1.11-0.38l2.1,2.1c-0.79,0.34-1.6,0.63-2.41,0.89 c-0.84,0.26-1.69,0.48-2.55,0.65c-0.86,0.17-1.73,0.3-2.63,0.39c-0.89,0.09-1.8,0.13-2.71,0.13s-1.81-0.04-2.71-0.13 c-0.89-0.09-1.77-0.22-2.63-0.39c-0.85-0.17-1.69-0.38-2.52-0.64c-0.83-0.26-1.64-0.55-2.45-0.89l-0.06-0.03 c-0.8-0.35-1.59-0.72-2.34-1.13c-0.75-0.41-1.48-0.85-2.19-1.33c-0.71-0.48-1.39-0.98-2.04-1.52c-0.66-0.54-1.28-1.11-1.88-1.71 c-0.6-0.6-1.17-1.23-1.71-1.88c-0.54-0.66-1.04-1.34-1.52-2.04c-0.47-0.71-0.92-1.44-1.33-2.19c-0.41-0.76-0.79-1.54-1.14-2.34 l-0.01-0.03c-0.35-0.81-0.65-1.63-0.91-2.46c-0.26-0.84-0.48-1.69-0.65-2.55c-0.17-0.86-0.3-1.74-0.39-2.64 c-0.08-0.89-0.13-1.8-0.13-2.7s0.04-1.81,0.13-2.71c0.09-0.9,0.22-1.77,0.39-2.63c0.17-0.85,0.38-1.69,0.64-2.52 s0.55-1.65,0.89-2.45l0.03-0.06c0.34-0.8,0.72-1.58,1.13-2.33l0-0.01c0.41-0.75,0.85-1.48,1.32-2.19c0.47-0.71,0.98-1.39,1.52-2.04 c0.54-0.65,1.11-1.29,1.71-1.88c0.6-0.6,1.23-1.17,1.88-1.71c0.65-0.54,1.34-1.04,2.04-1.52c0.71-0.47,1.44-0.92,2.19-1.32 l0.01-0.01c0.76-0.41,1.54-0.79,2.33-1.13l0.03-0.01c0.81-0.34,1.63-0.65,2.46-0.9c0.84-0.26,1.69-0.48,2.55-0.65 c0.86-0.17,1.73-0.3,2.63-0.39C57.8,0.05,58.7,0,59.62,0c0.91,0,1.81,0.05,2.71,0.13c0.89,0.08,1.77,0.22,2.63,0.38 c0.85,0.17,1.69,0.38,2.52,0.64c0.82,0.26,1.64,0.55,2.44,0.9l0.07,0.02c0.8,0.34,1.58,0.72,2.35,1.14 c0.75,0.41,1.48,0.85,2.19,1.33c0.71,0.48,1.39,0.98,2.04,1.52c0.65,0.54,1.29,1.11,1.88,1.71c0.6,0.6,1.17,1.23,1.71,1.88 c0.54,0.65,1.05,1.34,1.52,2.05c0.47,0.71,0.92,1.44,1.32,2.19c0.41,0.76,0.79,1.54,1.13,2.34l0.01,0.03 c0.34,0.8,0.64,1.62,0.9,2.46c0.18,0.57,0.33,1.14,0.47,1.72l-1.6-1.6c-0.78-0.78-1.63-1.48-2.52-2.06 c-0.13-0.27-0.26-0.55-0.39-0.82c-0.21-0.41-0.41-0.81-0.64-1.19h-3.26c-1.55-0.47-3.16-0.7-4.77-0.7s-3.22,0.23-4.77,0.7h-6.59 v3.95c-1.07,1.08-2.11,2.34-2.73,3.35v-7.31h-8.96c-1.15,1.8-2.05,3.58-2.69,5.35c-0.64,1.73-1.03,3.44-1.19,5.14h11.41 c-0.3,0.89-0.51,1.81-0.65,2.73H45.34c0.09,1.74,0.42,3.47,1,5.19c0.59,1.77,1.45,3.54,2.56,5.3h9.17 c0.71,1.27,1.61,2.46,2.69,3.54l0.22,0.22v6.46c1.22-1.02,2.35-2.04,3.41-3.06L66.31,47.55L66.31,47.55L66.31,47.55z M63.11,25.83 c-1.07,1.89-1.61,4.01-1.61,6.13c0,3.18,1.21,6.35,3.62,8.77l9.65,9.65c2.41,2.41,5.59,3.62,8.77,3.62c3.17,0,6.35-1.21,8.77-3.62 c2.41-2.41,3.61-5.58,3.61-8.76s-1.21-6.35-3.62-8.77l-9.64-9.65c-2.41-2.41-5.59-3.62-8.76-3.62c-2.47,0-4.94,0.73-7.04,2.19 C65.57,22.65,63.83,24.57,63.11,25.83L63.11,25.83L63.11,25.83L63.11,25.83z M72.06,29.95L72.06,29.95c-0.91,0.92-0.91,2.42,0,3.34 L73.78,35c0.92,0.92,2.42,0.92,3.33,0l0,0c0.92-0.92,0.92-2.42,0-3.33l-1.72-1.72C74.49,29.03,72.98,29.03,72.06,29.95L72.06,29.95 L72.06,29.95L72.06,29.95z M64.43,31.96c0-2.43,0.92-4.85,2.76-6.69c1.84-1.84,4.27-2.76,6.69-2.76c2.43,0,4.86,0.92,6.69,2.76 l9.65,9.65c1.84,1.84,2.76,4.27,2.76,6.69c0,2.43-0.92,4.85-2.76,6.69c-1.84,1.84-4.27,2.76-6.7,2.76c-2.42,0-4.85-0.92-6.69-2.76 l-9.64-9.65C65.36,36.82,64.43,34.4,64.43,31.96L64.43,31.96L64.43,31.96L64.43,31.96z M55.83,50.2c-1.66-1.42-3.17-2.86-4.52-4.29 c-1.47-1.56-2.75-3.13-3.86-4.72h-6.78c0.27,0.36,0.56,0.7,0.85,1.04c0.38,0.44,0.77,0.87,1.19,1.28l0.02,0.03 c0.53,0.53,1.09,1.04,1.67,1.51c0.58,0.48,1.2,0.94,1.83,1.36c0.63,0.42,1.29,0.82,1.97,1.19c0.68,0.37,1.39,0.71,2.13,1.03 l0.06,0.03c0.71,0.3,1.44,0.57,2.18,0.79c0.74,0.23,1.49,0.42,2.26,0.57c0.29,0.06,0.58,0.11,0.86,0.15L55.83,50.2L55.83,50.2 L55.83,50.2z M38.86,38.46h6.88c-0.95-1.7-1.68-3.42-2.2-5.14c-0.53-1.77-0.84-3.55-0.92-5.34h-6.85c0.03,0.55,0.08,1.1,0.14,1.63 c0.07,0.61,0.17,1.21,0.29,1.81c0.15,0.78,0.35,1.54,0.58,2.29c0.23,0.74,0.5,1.47,0.8,2.18l0.01,0.02 c0.2,0.46,0.41,0.92,0.64,1.36C38.43,37.67,38.64,38.07,38.86,38.46L38.86,38.46L38.86,38.46z M35.77,25.24h6.89 c0.15-1.76,0.51-3.53,1.1-5.3c0.57-1.72,1.35-3.45,2.35-5.19h-7.25c-0.22,0.38-0.43,0.78-0.63,1.19c-0.22,0.44-0.43,0.89-0.63,1.36 l-0.02,0.05c-0.3,0.71-0.57,1.44-0.79,2.18c-0.23,0.74-0.42,1.49-0.57,2.26c-0.12,0.59-0.21,1.2-0.29,1.81 C35.85,24.15,35.8,24.69,35.77,25.24L35.77,25.24L35.77,25.24z M40.66,12.03h7.18c1.09-1.56,2.35-3.12,3.78-4.69 c1.32-1.44,2.79-2.9,4.41-4.35l-0.29,0.05c-0.31,0.05-0.62,0.11-0.94,0.17c-0.78,0.15-1.54,0.35-2.29,0.58 c-0.74,0.23-1.47,0.5-2.19,0.8l-0.02,0.01c-0.74,0.32-1.44,0.66-2.12,1.03c-0.68,0.37-1.34,0.76-1.97,1.19 c-0.63,0.42-1.24,0.88-1.83,1.36c-0.58,0.48-1.15,0.99-1.68,1.53l-0.02,0.01c-0.41,0.41-0.81,0.84-1.19,1.28 C41.22,11.33,40.93,11.67,40.66,12.03L40.66,12.03L40.66,12.03z M63.2,2.98c1.62,1.45,3.09,2.91,4.41,4.35 c1.43,1.57,2.69,3.13,3.78,4.69h7.18c-0.27-0.35-0.55-0.7-0.84-1.04c-0.38-0.44-0.78-0.87-1.2-1.29l-0.02-0.01 c-0.54-0.54-1.1-1.04-1.68-1.53C74.25,7.68,73.64,7.23,73,6.81c-0.63-0.42-1.29-0.82-1.97-1.19c-0.68-0.37-1.39-0.71-2.12-1.03 l-0.05-0.03c-0.71-0.3-1.44-0.57-2.18-0.79c-0.74-0.22-1.49-0.42-2.26-0.57l-0.02,0c-0.3-0.06-0.62-0.12-0.92-0.16L63.2,2.98 L63.2,2.98L63.2,2.98z M60.98,4.65v7.38h7.03c-0.94-1.21-1.99-2.43-3.15-3.65C63.68,7.14,62.39,5.9,60.98,4.65L60.98,4.65 L60.98,4.65z M58.25,48.68v-7.49h-7.42c0.97,1.25,2.07,2.49,3.3,3.72C55.37,46.17,56.74,47.42,58.25,48.68L58.25,48.68L58.25,48.68 z M58.25,12.03V4.65c-1.41,1.25-2.7,2.49-3.88,3.72c-1.17,1.22-2.22,2.44-3.16,3.66H58.25L58.25,12.03L58.25,12.03z M57.87,66.78 h7.14c0.67,0,1.22,0.55,1.22,1.22l0,0c0,0.67-0.55,1.22-1.22,1.22h-7.14c-0.67,0-1.22-0.55-1.22-1.22l0,0 C56.65,67.32,57.2,66.78,57.87,66.78L57.87,66.78L57.87,66.78z"></path></g></svg>
  </header>

  <!-- About Section -->
  <div class="w3-content w3-justify w3-text-grey w3-padding-64" id="about">
    <h2 class="w3-text-light-grey">DEVICE PANEL</h2>
    <hr style="width:200px" class="w3-opacity">
    <br>
    
    <div class="w3-row w3-center w3-padding-16 w3-section w3-light-grey">
      <div class="w3-quarter w3-section zoom">
        <span class="w3-xlarge"><i class="fa fa-lightbulb-o" aria-hidden="true"></i></span><br>
        Bulb <span id="bulb">ON</span>
      </div>
      <div class="w3-quarter w3-section zoom">
        <span class="w3-xlarge"><i class="fa fa-snowflake-o" aria-hidden="true"></i></span><br>
        Fan <span id="fan">ON</span>
      </div>
      <div class="w3-quarter w3-section zoom">
        <span class="w3-xlarge"><i class="fa fa-microchip" aria-hidden="true"></i></span><br>
        Socket-1 <span id="socket1">ON</span>
      </div>
      <div class="w3-quarter w3-section zoom">
        <span class="w3-xlarge"><i class="fa fa-microchip" aria-hidden="true"></i></span><br>
        Socket-2 <span id="socket2">ON</span>
      </div>
    </div>

    <button class="w3-button w3-light-grey w3-padding-large w3-section" onclick="window.location.reload()">
      <i class="fa fa-paper-plane"></i> Refresh
    </button>

<!-- END PAGE CONTENT -->
</div>

</body>

<script>
    const butttons    = document.querySelectorAll(".zoom");
    const bulbSpan    = document.getElementById("bulb");
    const fanSpan     = document.getElementById("fan");
    const socket1Span = document.getElementById("socket1");
    const socket2Span = document.getElementById("socket2");

    
    window.onload = function() {
        fetch_data();
    };
    
    butttons.forEach(element => {
        element.addEventListener("click",(e=>{
            let state = e.target.children[2].innerText;
            console.log(state)

            if (state == "ON"){
                state = "OFF";
            }else{
                state = "ON";
            }
            console.log(state)

            e.target.children[2].innerText = state;
            post_data();

        }))
    });


    function fetch_data(){
        fetch('https://herokufirstelder.herokuapp.com/get_data', {
                                            method: 'get',
                                            headers: {
                                                'Accept': 'application/json, text/plain, */*',
                                                'Content-Type': 'application/json'
                                            },
        }).then(res => res.json())
        .then(res => {
            console.log(res)

            data = res;
            
            bulbSpan.innerHTML = `${data.bulb.split("-")[1]}`;
            fanSpan.innerHTML = `${data.fan.split("-")[1]}`;
            socket1Span.innerHTML = `${data.socket1.split("-")[1]}`;
            socket2Span.innerHTML = `${data.socket2.split("-")[1]}`;
            console.log(data)
        });
    }

    function post_data(){

        
        fetch(`https://herokufirstelder.herokuapp.com/post_data?bulb=bulb-${bulbSpan.innerHTML}&fan=fan-${fanSpan.innerHTML}&socket1=socket1-${socket1Span.innerHTML}&socket2=socket2-${socket2Span.innerHTML}`, {
                                            method: 'get',
                                            headers: {
                                                'Accept': 'application/json, text/plain, */*',
                                                'Content-Type': 'application/json'
                                            },
        }).then(res => res.json())
        .then(res => console.log(res));
    }

    setInterval(() => {
        fetch_data();
    }, 10000);

</script>
</html>